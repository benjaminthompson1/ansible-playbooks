###############################################################################
# Usage:
#  ansible-playbook -i <inventory> <playbook>
#
# Example:
#  ansible-playbook -i inventory vtp.yml
#  ansible-playbook -i inventory vtp.yml -v
###############################################################################
---
- hosts: ben_s0w1
  collections:
    - ibm.ibm_zos_core
  gather_facts: no

  vars:
    adcd_ver: Z24C
    vtp_high_level_qualifier: VTP201
    bzu_high_level_qualifier: BZU.#CUST

  environment: "{{ environment_vars }}"

  tasks:
    - name: Ping using zos_ping
      zos_ping:
      register: zos_ping_result

    - name: Response from zos_ping
      debug:
        msg: "{{ zos_ping_result }}"

###############################################################################
# Usage: 
#  create custom JCL dataset 
###############################################################################

    - name: Create VTP201.CUSTOM.JCL PDS.
      zos_data_set:
        name: "{{ vtp_high_level_qualifier }}.CUSTOM.JCL"
        type: pds
        space_primary: 1
        space_secondary: 1
        space_type: trk
        record_format: fb
        record_length: 80
        replace: yes
      register: zos_data_set_result

    - name: Response from Create VTP201.CUSTOM.JCL PDS.
      debug:
        msg: "{{ zos_data_set_result }}"
        verbosity: 1
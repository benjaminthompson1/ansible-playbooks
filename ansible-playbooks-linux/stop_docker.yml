###############################################################################
# Usage:
#  ansible-playbook -i <inventory> <playbook>
#
# Example:
#  ansible-playbook -i inventory stop_docker.yml
#  ansible-playbook -i inventory stop_docker.yml -v
###############################################################################
---
- hosts: p52
  vars_files:
    - vault.yml
  tasks:

    - name: Stop MQ Docker container
      docker_container:
        name: QM1
        state: stopped

    - name: Remove MQ Docker container
      docker_container:
        name: QM1
        state: absent

    - name: Stop Jenkins Docker container
      docker_container:
        name: jenkins
        state: stopped

    - name: Remove Jenkins Docker container
      docker_container:
        name: jenkins
        state: absent

    - name: Execute command to stop dockerManageZdap script
      ansible.builtin.command:
        cmd: "/home/ibmsys1/docker-compose/bin/dockerManageZdap.sh down"
      register: result

    - name: Display result of command execution
      debug:
        var: result.stdout_lines

    - name: Execute command to stop UCD server
      ansible.builtin.command:
        cmd: "/opt/ucd/server/bin/server stop"
      become: yes
      register: result

    - name: Display result of command execution
      debug:
        var: result.stdout_lines